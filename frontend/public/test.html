<html lang="en">
	<head>
		<!-- Required meta tags -->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		
		<!-- Bootstrap CSS -->
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
			integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
		<title>Hello, world!</title>
	</head>
	<body>
		<h1>Hello World!</h1>
		
		<table style="width:50%">
			<tr>
				<th><textarea class="form-control" id="game-info" rows="5"></textarea></th>
			</tr>
			<tr>
				<!-- Start Bouton -->
				<th><input class="btn btn-secondary btn-lg btn-block" id="Start" type="button" value="Start"></th>
			</tr>
			<tr>
				<!-- Player1 Bouton -->
				<th><input class="btn btn-secondary btn-lg btn-block" id="P1" type="button" value="P1"></th>
			</tr>
			<tr>
				<!-- player2 Bouton -->
				<th><input class="btn btn-secondary btn-lg btn-block" id="P2" type="button" value="P2"></th>
			</tr>
			<tr>
				<!-- player1 Bouton UP -->
				<th><input class="btn btn-secondary btn-lg btn-block" id="P1_UP" type="button" value="P1 UP"></th>
			</tr>
			<tr>
				<!-- player1 Bouton DOWN-->
				<th><input class="btn btn-secondary btn-lg btn-block" id="P1_DOWN" type="button" value="P1 DOWN"></th>
			</tr>
			<tr>
				<!-- player2 Bouton UP-->
				<th><input class="btn btn-secondary btn-lg btn-block" id="P2_UP" type="button" value="P2 UP"></th>
			</tr>
			<tr>
				<!-- player2 Bouton DOWN-->
				<th><input class="btn btn-secondary btn-lg btn-block" id="P2_DOWN" type="button" value="P2 DOWN"></th>
			</tr>
		</table>
		
		<div id="myData"></div>
		<script>
			//connecting to websocket
			const gameSocket = new WebSocket(
			'ws://127.0.0.1:8000/ws/game/0/'
			);
			
			//Send a message to the backend to start the game from the start button
			document.querySelector('#Start').onclick = function(e) {
				gameSocket.send(JSON.stringify({
					'message': 'start',
				}))
				console.log("start send")
			}
			
			//Send a message to the backend to add P1 in the game
			document.querySelector('#P1').onclick = function(e) {
				gameSocket.send(JSON.stringify({
					'message': 'P1',
				}))
				console.log("P1 message send")
			}
			
			//Send a message to the backend to add P2 in the game
			document.querySelector('#P2').onclick = function(e) {
				gameSocket.send(JSON.stringify({
					'message': 'P2',
				}))
				console.log("P2 message send")
			}
			
			document.querySelector('#P1_UP').onclick = function(e) {
				gameSocket.send(JSON.stringify({
					'message': 'P1_UP',
				}))
				console.log("P1 UP send")
			}
			
			document.querySelector('#P1_DOWN').onclick = function(e) {
				gameSocket.send(JSON.stringify({
					'message': 'P1_DOWN',
				}))
				console.log("P1 DOWN send")
			}
			
			document.querySelector('#P2_UP').onclick = function(e) {
				gameSocket.send(JSON.stringify({
					'message': 'P2_UP',
				}))
				console.log("P2 UP send")
			}
			
			document.querySelector('#P2_DOWN').onclick = function(e) {
				gameSocket.send(JSON.stringify({
					'message': 'P2_DOWN',
				}))
				console.log("P2 DOWN send")
			}
			
			//test to receive data from backend (can be removed)
			gameSocket.onmessage = function(e) {
				const data = JSON.parse(e.data);
				console.log(data)
				if (Number.isInteger(data) == true) 
					document.querySelector('#game-info').inerHTML = (data)
			}
		</script>
		<!-- Optional JavaScript -->
		<!-- jQuery first, then Popper.js, then Bootstrap JS -->
		<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
			integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous">
		</script>
		<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
			integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous">
		</script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
			integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous">
		</script>
	</body>
</html>
